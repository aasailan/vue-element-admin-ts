{"version":3,"sources":["webpack:///asset/js/28.2c0eec73217ac37f2c6f.js","webpack:///./src/pages/photos/index.vue","webpack:///./src/pages/photos/index.ts","webpack:///./src/pages/photos/index.vue?16b4"],"names":["webpackJsonp","550","module","__webpack_exports__","__webpack_require__","injectStyle","ssrContext","disposed","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0__awesome_typescript_loader_tslint_loader_index_ts__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_6e1f5d34_hasScoped_false_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_bustCache_index_vue__","normalizeComponent","__vue_styles__","Component","options","__file","esModule","keys","some","key","substr","716","exports","717","__WEBPACK_IMPORTED_MODULE_0_vue__","__WEBPACK_IMPORTED_MODULE_1_vue_class_component__","__WEBPACK_IMPORTED_MODULE_1_vue_class_component___default","n","__WEBPACK_IMPORTED_MODULE_2_vuex_class__","__WEBPACK_IMPORTED_MODULE_3_muse_ui_dialog__","__WEBPACK_IMPORTED_MODULE_4_muse_ui_flatButton__","__WEBPACK_IMPORTED_MODULE_5__api__","__WEBPACK_IMPORTED_MODULE_6__entity_toast__","__WEBPACK_IMPORTED_MODULE_7__config__","__WEBPACK_IMPORTED_MODULE_8__components_croppa_index_vue__","__WEBPACK_IMPORTED_MODULE_9_core_image_xhr__","__WEBPACK_IMPORTED_MODULE_9_core_image_xhr___default","__WEBPACK_IMPORTED_MODULE_10_vue_property_decorator__","__extends","this","extendStatics","setPrototypeOf","__proto__","Array","d","b","p","hasOwnProperty","__","constructor","prototype","create","__decorate","decorators","target","desc","c","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","i","__metadata","k","v","metadata","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","e","rejected","result","done","then","apply","__generator","body","verb","op","f","TypeError","_","y","t","call","label","ops","pop","trys","push","g","sent","throw","return","Symbol","iterator","PhotoComp","_super","_this","isUploading","params","action","id","imgHost","album","maxCount","showIndex","deleteIndex","dialog","isCroping","myCroppaOption","fullScreen","fromCamera","compressionRate","quality","get","myInfo","uid","enumerable","configurable","updateView","imgs","_i","_a","photo","url","updateViewImgs","activated","$route","getAlbum","res","e_1","getAlbumByLetterId","obj","showToast","message","deactivated","close","hideCroppa","opt","isShow","toggleView","clickPhoto","event","getAttribute","parseInt","cancel","confirm","e_2","deletePhoto","splice","selectPhoto","$refs","croppa","chooseFile","confirmCroppa","data","showLoading","headers","access-token","state","token","base64Code","type","filename","filed","msgStatus","e_3","Error","msgText","hideLoading","cancelCroppa","hide","user","Function","components","mu-dialog","mu-flat-button","my-croppa","718","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","on","click","$event","_l","index","data-action","data-index","isMySelf","_e","_v","staticStyle","width","stopPropagation","open","title","titleClass","bodyClass","slot","primary","ref","option","staticRenderFns","_withStripped","esExports"],"mappings":"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","file":"asset/js/28.2c0eec73217ac37f2c6f.js","sourcesContent":["webpackJsonp([28],{\n\n/***/ 550:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__awesome_typescript_loader_tslint_loader_index_ts__ = __webpack_require__(717);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_6e1f5d34_hasScoped_false_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_bustCache_index_vue__ = __webpack_require__(718);\nvar disposed = false\nfunction injectStyle (ssrContext) {\n  if (disposed) return\n  __webpack_require__(716)\n}\nvar normalizeComponent = __webpack_require__(6)\n/* script */\n/* template */\n\n/* template functional */\n  var __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__awesome_typescript_loader_tslint_loader_index_ts__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_6e1f5d34_hasScoped_false_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_bustCache_index_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\nComponent.options.__file = \"src\\\\pages\\\\photos\\\\index.vue\"\nif (Component.esModule && Object.keys(Component.esModule).some(function (key) {  return key !== \"default\" && key.substr(0, 2) !== \"__\"})) {  console.error(\"named exports are not supported in *.vue files.\")}\n\n/* hot reload */\nif (false) {(function () {\n  var hotAPI = require(\"vue-hot-reload-api\")\n  hotAPI.install(require(\"vue\"), false)\n  if (!hotAPI.compatible) return\n  module.hot.accept()\n  if (!module.hot.data) {\n    hotAPI.createRecord(\"data-v-6e1f5d34\", Component.options)\n  } else {\n    hotAPI.reload(\"data-v-6e1f5d34\", Component.options)\n' + '  }\n  module.hot.dispose(function (data) {\n    disposed = true\n  })\n})()}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ 716:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 717:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(12);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_vue_class_component__ = __webpack_require__(55);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_vue_class_component___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_vue_class_component__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_vuex_class__ = __webpack_require__(110);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_muse_ui_dialog__ = __webpack_require__(163);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_muse_ui_flatButton__ = __webpack_require__(159);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__api__ = __webpack_require__(61);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__entity_toast__ = __webpack_require__(60);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__config__ = __webpack_require__(25);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__components_croppa_index_vue__ = __webpack_require__(578);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9_core_image_xhr__ = __webpack_require__(576);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9_core_image_xhr___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_9_core_image_xhr__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10_vue_property_decorator__ = __webpack_require__(77);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10_vue_property_decorator___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_10_vue_property_decorator__);\n/*\r\n * @Author: qiao\r\n * @Date: 2018-01-03 16:30:47\r\n * @Last Modified by: mikey.zhaopeng\r\n * @Last Modified time: 2018-01-31 16:14:47\r\n * @description:  个人相册界面\r\n */\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __metadata = (this && this.__metadata) || function (k, v) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = y[op[0] & 2 ? \"return\" : op[0] ? \"throw\" : \"next\"]) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [0, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nvar PhotoComp = /** @class */ (function (_super) {\r\n    __extends(PhotoComp, _super);\r\n    function PhotoComp() {\r\n        // isViewing = false;\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.isUploading = false;\r\n        _this.params = {\r\n            action: null,\r\n            id: null\r\n        };\r\n        _this.imgHost = __WEBPACK_IMPORTED_MODULE_7__config__[\"q\" /* IMG_HOST */];\r\n        _this.album = [];\r\n        // 最多八张相片\r\n        _this.maxCount = 8;\r\n        _this.showIndex = null;\r\n        _this.deleteIndex = null;\r\n        _this.dialog = false;\r\n        _this.isCroping = false;\r\n        _this.myCroppaOption = {\r\n            fullScreen: true,\r\n            fromCamera: false,\r\n            compressionRate: 0.8,\r\n            quality: 6\r\n        };\r\n        return _this;\r\n        /**\r\n         * 上传相册\r\n         * @param event\r\n         */\r\n        // selectImg(event) {\r\n        //     this.isUploading = true;\r\n        //     let image = document.getElementById('photo-img'); // 设置image\r\n        //     this['clip'](event , { // 设置clip\r\n        //         resultObj : image,\r\n        //         headers: {\r\n        //             'access-token': this['$store'].state.token\r\n        //         },\r\n        // \t\taspectRatio : NaN, // 裁剪比例,自由裁剪\r\n        //         uploadServer: UPLOAD_ALBUM_URL,\r\n        //         async uploadSuccess(res) {\r\n        //             console.log('uploadSuccess');\r\n        //             try {\r\n        //                 await this.getAlbum();\r\n        //                 this.showToast(new ToastMsg('上传相册成功'));\r\n        //             } catch (e) {\r\n        //                 this.showToast(new ToastMsg('上传错误'));\r\n        //             } finally {\r\n        //                 this.isUploading = false;\r\n        //             }\r\n        //         },\r\n        //         uploadError() {\r\n        //             console.log('uploadError');   \r\n        //             this.showToast(new ToastMsg('上传错误'));\r\n        //             this.isUploading = false;\r\n        //         }\r\n        //     });\r\n        // }\r\n    }\r\n    Object.defineProperty(PhotoComp.prototype, \"isMySelf\", {\r\n        // 判断是否是自己，以便隐藏某些信息\r\n        get: function () {\r\n            if (this.myInfo && this.params.id === this.myInfo.uid) {\r\n                return true;\r\n            }\r\n            else {\r\n                return false;\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    PhotoComp.prototype.updateView = function () {\r\n        var imgs = [];\r\n        for (var _i = 0, _a = this.album; _i < _a.length; _i++) {\r\n            var photo = _a[_i];\r\n            imgs.push(photo.url);\r\n        }\r\n        console.log('imgs');\r\n        this.updateViewImgs(imgs);\r\n    };\r\n    PhotoComp.prototype.activated = function () {\r\n        var params = this.$route.params;\r\n        this.params = params;\r\n        this.isUploading = false;\r\n        // this.isViewing = false;\r\n        this.isCroping = false;\r\n        this.getAlbum();\r\n    };\r\n    // 相册\r\n    PhotoComp.prototype.getAlbum = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var res, res, e_1;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        _a.trys.push([0, 5, , 6]);\r\n                        if (!(this.params.action === 'recommendation')) return [3 /*break*/, 2];\r\n                        return [4 /*yield*/, __WEBPACK_IMPORTED_MODULE_5__api__[\"a\" /* default */].getAlbumByLetterId(this.params.id)];\r\n                    case 1:\r\n                        res = _a.sent();\r\n                        this.album = res.body.obj;\r\n                        return [3 /*break*/, 4];\r\n                    case 2: return [4 /*yield*/, __WEBPACK_IMPORTED_MODULE_5__api__[\"a\" /* default */].getAlbum(this.params.id)];\r\n                    case 3:\r\n                        res = _a.sent();\r\n                        this.album = res.body.obj;\r\n                        _a.label = 4;\r\n                    case 4: return [3 /*break*/, 6];\r\n                    case 5:\r\n                        e_1 = _a.sent();\r\n                        this.showToast(new __WEBPACK_IMPORTED_MODULE_6__entity_toast__[\"a\" /* ToastMsg */](e_1.message));\r\n                        return [3 /*break*/, 6];\r\n                    case 6: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    PhotoComp.prototype.deactivated = function () {\r\n        this.close();\r\n        // 关闭可能存在大图预览\r\n        // if (this.isViewing) {\r\n        //     const viewer = this.$refs['viewer'].$viewer;\r\n        //     viewer.hide();\r\n        //     viewer.destroy();\r\n        // }\r\n        // 关闭可能存在的裁剪框\r\n        if (this.isUploading) {\r\n            this['destoried']();\r\n        }\r\n        // 关闭裁剪框\r\n        if (this.isCroping) {\r\n            this.hideCroppa();\r\n        }\r\n        // 关闭大图预览\r\n        var opt = {\r\n            isShow: false,\r\n            showIndex: 1\r\n        };\r\n        this.toggleView(opt);\r\n    };\r\n    PhotoComp.prototype.clickPhoto = function (event) {\r\n        var target = event.target;\r\n        var action = target.getAttribute('data-action');\r\n        if (action === 'show') {\r\n            this.showIndex = parseInt(target.getAttribute('data-index'), 10);\r\n            var opt = {\r\n                isShow: true,\r\n                showIndex: this.showIndex\r\n            };\r\n            this.toggleView(opt);\r\n            // 旧版图片预览\r\n            // const viewer = this.$refs['viewer'].$viewer;\r\n            // viewer.show();\r\n            // viewer.view(2);\r\n        }\r\n        else if (action === 'delete') {\r\n            this.deleteIndex = parseInt(target.getAttribute('data-index'), 10);\r\n            this.dialog = true;\r\n        }\r\n    };\r\n    /* 旧版大图预览 */\r\n    // viewShown() {\r\n    //     console.log('viewShown');\r\n    //     this.isViewing = true;\r\n    //     const viewer = this.$refs['viewer'].$viewer; \r\n    //     viewer.view(this.showIndex);\r\n    // }\r\n    PhotoComp.prototype.close = function () {\r\n        this.dialog = false;\r\n    };\r\n    PhotoComp.prototype.cancel = function () {\r\n        this.close();\r\n    };\r\n    PhotoComp.prototype.confirm = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var res, e_2;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        _a.trys.push([0, 2, , 3]);\r\n                        return [4 /*yield*/, __WEBPACK_IMPORTED_MODULE_5__api__[\"a\" /* default */].deletePhoto(this.album[this.deleteIndex].id)];\r\n                    case 1:\r\n                        res = _a.sent();\r\n                        this.album.splice(this.deleteIndex, 1);\r\n                        return [3 /*break*/, 3];\r\n                    case 2:\r\n                        e_2 = _a.sent();\r\n                        this.showToast(new __WEBPACK_IMPORTED_MODULE_6__entity_toast__[\"a\" /* ToastMsg */](e_2.message));\r\n                        return [3 /*break*/, 3];\r\n                    case 3:\r\n                        this.close();\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /* 裁剪上传 */\r\n    PhotoComp.prototype.selectPhoto = function () {\r\n        this.isCroping = true;\r\n        this.$refs.croppa.chooseFile();\r\n    };\r\n    PhotoComp.prototype.confirmCroppa = function (data) {\r\n        var _this = this;\r\n        // 在这里上传头像\r\n        this.showLoading();\r\n        var url = __WEBPACK_IMPORTED_MODULE_7__config__[\"U\" /* UPLOAD_ALBUM_URL */];\r\n        var headers = {\r\n            'access-token': this['$store'].state.token\r\n        };\r\n        var params = {\r\n            base64Code: data.base64Code,\r\n            type: data.type,\r\n            filename: data.filename,\r\n            filed: 'file'\r\n        };\r\n        __WEBPACK_IMPORTED_MODULE_9_core_image_xhr___default()('POST', url, headers, params, function (res) { return __awaiter(_this, void 0, void 0, function () {\r\n            var msgStatus, e_3;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        _a.trys.push([0, 4, 5, 6]);\r\n                        msgStatus = res.msgStatus;\r\n                        if (!(msgStatus === 0)) return [3 /*break*/, 2];\r\n                        return [4 /*yield*/, this.getAlbum()];\r\n                    case 1:\r\n                        _a.sent();\r\n                        this.showToast(new __WEBPACK_IMPORTED_MODULE_6__entity_toast__[\"a\" /* ToastMsg */]('上传相册成功'));\r\n                        return [3 /*break*/, 3];\r\n                    case 2: throw new Error(res.msgText);\r\n                    case 3: return [3 /*break*/, 6];\r\n                    case 4:\r\n                        e_3 = _a.sent();\r\n                        this.showToast(new __WEBPACK_IMPORTED_MODULE_6__entity_toast__[\"a\" /* ToastMsg */](e_3.message));\r\n                        return [3 /*break*/, 6];\r\n                    case 5:\r\n                        this.hideLoading();\r\n                        this.hideCroppa();\r\n                        return [7 /*endfinally*/];\r\n                    case 6: return [2 /*return*/];\r\n                }\r\n            });\r\n        }); }, function () {\r\n            _this.showToast(new __WEBPACK_IMPORTED_MODULE_6__entity_toast__[\"a\" /* ToastMsg */]('上传失败'));\r\n            _this.hideLoading();\r\n            _this.hideCroppa();\r\n        }, true, true);\r\n    };\r\n    PhotoComp.prototype.cancelCroppa = function () {\r\n        this.hideCroppa();\r\n    };\r\n    PhotoComp.prototype.hideCroppa = function () {\r\n        this.$refs.croppa.hide();\r\n        this.isCroping = false;\r\n    };\r\n    __decorate([\r\n        Object(__WEBPACK_IMPORTED_MODULE_2_vuex_class__[\"a\" /* Action */])('showToast'),\r\n        __metadata(\"design:type\", Object)\r\n    ], PhotoComp.prototype, \"showToast\", void 0);\r\n    __decorate([\r\n        Object(__WEBPACK_IMPORTED_MODULE_2_vuex_class__[\"a\" /* Action */])('showLoading'),\r\n        __metadata(\"design:type\", Object)\r\n    ], PhotoComp.prototype, \"showLoading\", void 0);\r\n    __decorate([\r\n        Object(__WEBPACK_IMPORTED_MODULE_2_vuex_class__[\"a\" /* Action */])('hideLoading'),\r\n        __metadata(\"design:type\", Object)\r\n    ], PhotoComp.prototype, \"hideLoading\", void 0);\r\n    __decorate([\r\n        Object(__WEBPACK_IMPORTED_MODULE_2_vuex_class__[\"a\" /* Action */])('updateViewImgs'),\r\n        __metadata(\"design:type\", Object)\r\n    ], PhotoComp.prototype, \"updateViewImgs\", void 0);\r\n    __decorate([\r\n        Object(__WEBPACK_IMPORTED_MODULE_2_vuex_class__[\"a\" /* Action */])('toggleView'),\r\n        __metadata(\"design:type\", Object)\r\n    ], PhotoComp.prototype, \"toggleView\", void 0);\r\n    __decorate([\r\n        Object(__WEBPACK_IMPORTED_MODULE_2_vuex_class__[\"c\" /* State */])(function (state) { return state.user.user; }),\r\n        __metadata(\"design:type\", Object)\r\n    ], PhotoComp.prototype, \"myInfo\", void 0);\r\n    __decorate([\r\n        Object(__WEBPACK_IMPORTED_MODULE_10_vue_property_decorator__[\"Watch\"])('album'),\r\n        __metadata(\"design:type\", Function),\r\n        __metadata(\"design:paramtypes\", []),\r\n        __metadata(\"design:returntype\", void 0)\r\n    ], PhotoComp.prototype, \"updateView\", null);\r\n    PhotoComp = __decorate([\r\n        __WEBPACK_IMPORTED_MODULE_1_vue_class_component___default()({\r\n            components: {\r\n                'mu-dialog': __WEBPACK_IMPORTED_MODULE_3_muse_ui_dialog__[\"a\" /* default */],\r\n                'mu-flat-button': __WEBPACK_IMPORTED_MODULE_4_muse_ui_flatButton__[\"a\" /* default */],\r\n                'my-croppa': __WEBPACK_IMPORTED_MODULE_8__components_croppa_index_vue__[\"a\" /* default */]\r\n                // 'view-image': viewImage\r\n            }\r\n        })\r\n    ], PhotoComp);\r\n    return PhotoComp;\r\n}(__WEBPACK_IMPORTED_MODULE_0_vue__[\"default\"]));\r\n/* harmony default export */ __webpack_exports__[\"a\"] = (PhotoComp);\r\n\n\n/***/ }),\n\n/***/ 718:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    { staticClass: \"content\", attrs: { id: \"photo\" } },\n    [\n      _c(\n        \"div\",\n        {\n          staticClass: \"photo-content\",\n          on: {\n            click: function($event) {\n              _vm.clickPhoto($event)\n            }\n          }\n        },\n        [\n          _vm._l(_vm.album, function(photo, index) {\n            return _c(\n              \"load-img\",\n              {\n                key: photo.id,\n                staticClass: \"photo-wrap center-bg\",\n                attrs: {\n                  type: \"div\",\n                  url: photo.url,\n                  \"data-action\": \"show\",\n                  \"data-index\": index\n                }\n              },\n              [\n                _vm.isMySelf\n                  ? _c(\"i\", {\n                      staticClass: \"iconfont icon-clear\",\n                      attrs: { \"data-action\": \"delete\", \"data-index\": index }\n                    })\n                  : _vm._e()\n              ]\n            )\n          }),\n          _vm._v(\" \"),\n          _vm.isMySelf && _vm.album.length < _vm.maxCount\n            ? _c(\n                \"div\",\n                {\n                  staticClass: \"photo-wrap add-photo\",\n                  staticStyle: { width: \"31%\" },\n                  attrs: { \"data-action\": \"add\" },\n                  on: {\n                    click: function($event) {\n                      $event.stopPropagation()\n                      _vm.selectPhoto($event)\n                    }\n                  }\n                },\n                [\n                  _c(\"span\", { attrs: { \"data-action\": \"add\" } }, [\n                    _vm._v(\"添加照片\")\n                  ])\n                ]\n              )\n            : _vm._e(),\n          _vm._v(\" \"),\n          _vm.album.length === 0 && !_vm.isMySelf\n            ? _c(\"div\", { staticClass: \"photo-wrap add-photo\" }, [\n                _c(\"span\", [_vm._v(\"暂无照片\")])\n              ])\n            : _vm._e()\n        ],\n        2\n      ),\n      _vm._v(\" \"),\n      _c(\n        \"mu-dialog\",\n        {\n          attrs: {\n            open: _vm.dialog,\n            title: \"确认删除照片？\",\n            titleClass: \"dialog-title\",\n            bodyClass: \"dialog-body\"\n          },\n          on: { close: _vm.close }\n        },\n        [\n          _c(\"mu-flat-button\", {\n            attrs: { slot: \"actions\", primary: \"\", label: \"取消\" },\n            on: { click: _vm.cancel },\n            slot: \"actions\"\n          }),\n          _vm._v(\" \"),\n          _c(\"mu-flat-button\", {\n            attrs: { slot: \"actions\", primary: \"\", label: \"确定\" },\n            on: { click: _vm.confirm },\n            slot: \"actions\"\n          })\n        ],\n        1\n      ),\n      _vm._v(\" \"),\n      _c(\"my-croppa\", {\n        ref: \"croppa\",\n        attrs: { option: _vm.myCroppaOption },\n        on: { confirm: _vm.confirmCroppa, cancel: _vm.cancelCroppa }\n      })\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\nif (false) {\n  module.hot.accept()\n  if (module.hot.data) {\n    require(\"vue-hot-reload-api\")      .rerender(\"data-v-6e1f5d34\", esExports)\n  }\n}\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// asset/js/28.2c0eec73217ac37f2c6f.js","var disposed = false\nfunction injectStyle (ssrContext) {\n  if (disposed) return\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"id\\\":4,\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-6e1f5d34\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"globalVars\\\":{\\\"museUiTheme\\\":\\\"'J:\\\\\\\\qianduan\\\\\\\\vue\\\\\\\\vue-project\\\\\\\\ailink-wechat\\\\\\\\src\\\\\\\\assets\\\\\\\\css\\\\\\\\muse-custom-theme.less'\\\",\\\"museUiStylePath\\\":\\\"'J:\\\\\\\\qianduan\\\\\\\\vue\\\\\\\\vue-project\\\\\\\\ailink-wechat\\\\\\\\node_modules\\\\\\\\muse-ui\\\\\\\\src\\\\\\\\styles'\\\"}}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0&bustCache!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!awesome-typescript-loader!tslint-loader!./index.ts\"/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-6e1f5d34\\\",\\\"hasScoped\\\":false,\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0&bustCache!./index.vue\"\n/* template functional */\n  var __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\nComponent.options.__file = \"src\\\\pages\\\\photos\\\\index.vue\"\nif (Component.esModule && Object.keys(Component.esModule).some(function (key) {  return key !== \"default\" && key.substr(0, 2) !== \"__\"})) {  console.error(\"named exports are not supported in *.vue files.\")}\n\n/* hot reload */\nif (module.hot) {(function () {\n  var hotAPI = require(\"vue-hot-reload-api\")\n  hotAPI.install(require(\"vue\"), false)\n  if (!hotAPI.compatible) return\n  module.hot.accept()\n  if (!module.hot.data) {\n    hotAPI.createRecord(\"data-v-6e1f5d34\", Component.options)\n  } else {\n    hotAPI.reload(\"data-v-6e1f5d34\", Component.options)\n' + '  }\n  module.hot.dispose(function (data) {\n    disposed = true\n  })\n})()}\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/photos/index.vue\n// module id = 550\n// module chunks = 28","/*\r\n * @Author: qiao \r\n * @Date: 2018-01-03 16:30:47 \r\n * @Last Modified by: mikey.zhaopeng\r\n * @Last Modified time: 2018-01-31 16:14:47\r\n * @description:  个人相册界面\r\n */\r\n\r\nimport Vue from 'vue';\r\nimport Component from 'vue-class-component';\r\n\r\nimport { Action, State } from 'vuex-class';\r\nimport Dialog from 'muse-ui/dialog';\r\nimport flatButton from 'muse-ui/flatButton';\r\n\r\nimport { IPhotoParams } from '~/entity/route_params';\r\n\r\nimport Api from '~/api';\r\nimport { ToastMsg } from '~/entity/toast';\r\nimport { IPhoto } from '~/entity/user/userInterface';\r\nimport { IMG_HOST, UPLOAD_ALBUM_URL } from '~/config';\r\nimport { IUserInterface } from '~/entity/user';\r\n\r\n// 旧版图片预览\r\n// import Viewer from 'v-viewer';\r\n// Vue.use(Viewer);\r\n// import viewImage from '~/components/view_image/index.vue';\r\n\r\n/* 旧裁剪插件 */\r\n// import clipper from '~/vendors/clipper/clipper.js';\r\n// import '~/vendors/clipper/style.css';\r\n// Vue.use(clipper);\r\n\r\n/* 裁剪插件 */\r\nimport { ICroppaOption } from '~/components/croppa/croppa';\r\nimport Croppa from '~/components/croppa/index.vue';\r\nimport xhr from 'core-image-xhr';\r\nimport { IImgXhrParams } from '~/entity/imgxhr';\r\nimport { IViewImageOpt } from 'src/store/modules/view_image';\r\nimport { Watch } from 'vue-property-decorator';\r\n\r\n@Component({\r\n    components: {\r\n        'mu-dialog': Dialog,\r\n        'mu-flat-button': flatButton,\r\n        'my-croppa': Croppa\r\n        // 'view-image': viewImage\r\n    }\r\n})\r\nexport default class PhotoComp extends Vue {\r\n    // isViewing = false;\r\n\r\n    isUploading = false;\r\n\r\n    params: IPhotoParams = {\r\n        action: null,\r\n        id: null\r\n    };\r\n\r\n    imgHost = IMG_HOST;\r\n\r\n    album: IPhoto[] = [];\r\n\r\n    // 最多八张相片\r\n    maxCount = 8;\r\n\r\n    showIndex: number = null;\r\n\r\n    deleteIndex: number = null;\r\n\r\n    dialog = false;\r\n\r\n    @Action('showToast')\r\n    showToast;\r\n\r\n    /* 裁剪插件 */\r\n    @Action('showLoading')\r\n    showLoading;\r\n\r\n    @Action('hideLoading')\r\n    hideLoading;\r\n\r\n    isCroping = false;\r\n\r\n    myCroppaOption: ICroppaOption = {\r\n        fullScreen: true,\r\n        fromCamera: false,\r\n        compressionRate: 0.8,\r\n        quality: 6\r\n    };\r\n\r\n    $refs: {\r\n        croppa: any\r\n    };\r\n\r\n    /* 预览图片 */\r\n    @Action('updateViewImgs')\r\n    updateViewImgs;\r\n\r\n    @Action('toggleView')\r\n    toggleView;\r\n\r\n    @State(state => state.user.user)\r\n    myInfo: IUserInterface;\r\n\r\n     // 判断是否是自己，以便隐藏某些信息\r\n     get isMySelf() {\r\n        if (this.myInfo && this.params.id === this.myInfo.uid) {\r\n            return true;\r\n        } else {\r\n            return false;\r\n        }        \r\n    }\r\n\r\n    @Watch('album')\r\n    updateView() {\r\n        const imgs = [];\r\n        for (const photo of this.album) {\r\n            imgs.push(photo.url);\r\n        }\r\n        console.log('imgs');\r\n        this.updateViewImgs(imgs);\r\n    }\r\n\r\n    activated() {\r\n        const params = this.$route.params;\r\n        this.params = params;\r\n\r\n        this.isUploading = false;\r\n        // this.isViewing = false;\r\n        this.isCroping = false;\r\n\r\n        this.getAlbum();\r\n    }\r\n\r\n    // 相册\r\n    async getAlbum() {\r\n        try {\r\n            if (this.params.action === 'recommendation') {\r\n                // 根据推荐信id获取相册\r\n                const res = await Api.getAlbumByLetterId(this.params.id);\r\n                this.album = res.body.obj;\r\n            } else {\r\n                const res = await Api.getAlbum(this.params.id);\r\n                this.album = res.body.obj;\r\n            }\r\n        } catch (e) {\r\n            this.showToast(new ToastMsg(e.message));\r\n        }\r\n    }\r\n\r\n    deactivated() {\r\n        this.close();\r\n\r\n        // 关闭可能存在大图预览\r\n        // if (this.isViewing) {\r\n        //     const viewer = this.$refs['viewer'].$viewer;\r\n        //     viewer.hide();\r\n        //     viewer.destroy();\r\n        // }\r\n       \r\n        // 关闭可能存在的裁剪框\r\n        if (this.isUploading) {\r\n            this['destoried']();\r\n        }\r\n\r\n        // 关闭裁剪框\r\n        if (this.isCroping) {\r\n            this.hideCroppa();\r\n        }\r\n\r\n        // 关闭大图预览\r\n        const opt: IViewImageOpt = {\r\n            isShow: false,\r\n            showIndex: 1\r\n        };\r\n        this.toggleView(opt);\r\n    }\r\n\r\n    clickPhoto(event: Event) {\r\n        const target = <HTMLElement>event.target;\r\n        const action = target.getAttribute('data-action');\r\n        if (action === 'show') {\r\n            this.showIndex = parseInt(target.getAttribute('data-index'), 10);\r\n\r\n            const opt: IViewImageOpt = {\r\n                isShow: true,\r\n                showIndex: this.showIndex\r\n            };\r\n            this.toggleView(opt);\r\n\r\n            // 旧版图片预览\r\n            // const viewer = this.$refs['viewer'].$viewer;\r\n            // viewer.show();\r\n            // viewer.view(2);\r\n        } else if (action === 'delete') {\r\n            this.deleteIndex = parseInt(target.getAttribute('data-index'), 10);\r\n            this.dialog = true;\r\n        }\r\n    }\r\n\r\n    /* 旧版大图预览 */\r\n    // viewShown() {\r\n    //     console.log('viewShown');\r\n    //     this.isViewing = true;\r\n    //     const viewer = this.$refs['viewer'].$viewer; \r\n    //     viewer.view(this.showIndex);\r\n    // }\r\n\r\n    close() {\r\n        this.dialog = false;\r\n    }\r\n\r\n    cancel() {\r\n        this.close();\r\n    }\r\n\r\n    async confirm() {\r\n        // 删除照片\r\n        try {\r\n            const res = await Api.deletePhoto(this.album[this.deleteIndex].id);\r\n            this.album.splice(this.deleteIndex, 1);\r\n        } catch (e) {\r\n            this.showToast(new ToastMsg(e.message));\r\n        }\r\n        this.close();\r\n    }\r\n\r\n    /* 裁剪上传 */\r\n    selectPhoto() {\r\n        this.isCroping = true;\r\n        this.$refs.croppa.chooseFile();\r\n    }\r\n\r\n    confirmCroppa(data) {\r\n         // 在这里上传头像\r\n         this.showLoading();\r\n\r\n         const url = UPLOAD_ALBUM_URL;\r\n         const headers = {\r\n             'access-token': this['$store'].state.token\r\n         };\r\n         const params: IImgXhrParams = {\r\n             base64Code: data.base64Code,\r\n             type: data.type,\r\n             filename: data.filename,\r\n             filed: 'file'\r\n         };\r\n \r\n        xhr('POST', url, headers, params, async res => {\r\n            try {\r\n                const msgStatus = res.msgStatus; \r\n                if (msgStatus === 0) {\r\n                    await this.getAlbum();\r\n                    this.showToast(new ToastMsg('上传相册成功'));\r\n                } else {\r\n                    throw new Error(res.msgText);\r\n                }\r\n            } catch (e) {\r\n                this.showToast(new ToastMsg(e.message));\r\n            } finally {\r\n                this.hideLoading();\r\n                this.hideCroppa();\r\n            }\r\n        }, () => {\r\n            this.showToast(new ToastMsg('上传失败'));\r\n            this.hideLoading();\r\n            this.hideCroppa();\r\n        }, true, true);\r\n    }\r\n\r\n    cancelCroppa() {\r\n        this.hideCroppa();\r\n    }\r\n\r\n    hideCroppa() {\r\n        this.$refs.croppa.hide();\r\n        this.isCroping = false;\r\n    }\r\n\r\n    /**\r\n     * 上传相册\r\n     * @param event \r\n     */\r\n    // selectImg(event) {\r\n    //     this.isUploading = true;\r\n    //     let image = document.getElementById('photo-img'); // 设置image\r\n    //     this['clip'](event , { // 设置clip\r\n    //         resultObj : image,\r\n    //         headers: {\r\n    //             'access-token': this['$store'].state.token\r\n    //         },\r\n\t// \t\taspectRatio : NaN, // 裁剪比例,自由裁剪\r\n    //         uploadServer: UPLOAD_ALBUM_URL,\r\n    //         async uploadSuccess(res) {\r\n    //             console.log('uploadSuccess');\r\n    //             try {\r\n    //                 await this.getAlbum();\r\n    //                 this.showToast(new ToastMsg('上传相册成功'));\r\n    //             } catch (e) {\r\n    //                 this.showToast(new ToastMsg('上传错误'));\r\n    //             } finally {\r\n    //                 this.isUploading = false;\r\n    //             }\r\n    //         },\r\n    //         uploadError() {\r\n    //             console.log('uploadError');   \r\n    //             this.showToast(new ToastMsg('上传错误'));\r\n    //             this.isUploading = false;\r\n    //         }\r\n    //     });\r\n    // }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/tslint-loader!./src/pages/photos/index.ts","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    { staticClass: \"content\", attrs: { id: \"photo\" } },\n    [\n      _c(\n        \"div\",\n        {\n          staticClass: \"photo-content\",\n          on: {\n            click: function($event) {\n              _vm.clickPhoto($event)\n            }\n          }\n        },\n        [\n          _vm._l(_vm.album, function(photo, index) {\n            return _c(\n              \"load-img\",\n              {\n                key: photo.id,\n                staticClass: \"photo-wrap center-bg\",\n                attrs: {\n                  type: \"div\",\n                  url: photo.url,\n                  \"data-action\": \"show\",\n                  \"data-index\": index\n                }\n              },\n              [\n                _vm.isMySelf\n                  ? _c(\"i\", {\n                      staticClass: \"iconfont icon-clear\",\n                      attrs: { \"data-action\": \"delete\", \"data-index\": index }\n                    })\n                  : _vm._e()\n              ]\n            )\n          }),\n          _vm._v(\" \"),\n          _vm.isMySelf && _vm.album.length < _vm.maxCount\n            ? _c(\n                \"div\",\n                {\n                  staticClass: \"photo-wrap add-photo\",\n                  staticStyle: { width: \"31%\" },\n                  attrs: { \"data-action\": \"add\" },\n                  on: {\n                    click: function($event) {\n                      $event.stopPropagation()\n                      _vm.selectPhoto($event)\n                    }\n                  }\n                },\n                [\n                  _c(\"span\", { attrs: { \"data-action\": \"add\" } }, [\n                    _vm._v(\"添加照片\")\n                  ])\n                ]\n              )\n            : _vm._e(),\n          _vm._v(\" \"),\n          _vm.album.length === 0 && !_vm.isMySelf\n            ? _c(\"div\", { staticClass: \"photo-wrap add-photo\" }, [\n                _c(\"span\", [_vm._v(\"暂无照片\")])\n              ])\n            : _vm._e()\n        ],\n        2\n      ),\n      _vm._v(\" \"),\n      _c(\n        \"mu-dialog\",\n        {\n          attrs: {\n            open: _vm.dialog,\n            title: \"确认删除照片？\",\n            titleClass: \"dialog-title\",\n            bodyClass: \"dialog-body\"\n          },\n          on: { close: _vm.close }\n        },\n        [\n          _c(\"mu-flat-button\", {\n            attrs: { slot: \"actions\", primary: \"\", label: \"取消\" },\n            on: { click: _vm.cancel },\n            slot: \"actions\"\n          }),\n          _vm._v(\" \"),\n          _c(\"mu-flat-button\", {\n            attrs: { slot: \"actions\", primary: \"\", label: \"确定\" },\n            on: { click: _vm.confirm },\n            slot: \"actions\"\n          })\n        ],\n        1\n      ),\n      _vm._v(\" \"),\n      _c(\"my-croppa\", {\n        ref: \"croppa\",\n        attrs: { option: _vm.myCroppaOption },\n        on: { confirm: _vm.confirmCroppa, cancel: _vm.cancelCroppa }\n      })\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\nif (module.hot) {\n  module.hot.accept()\n  if (module.hot.data) {\n    require(\"vue-hot-reload-api\")      .rerender(\"data-v-6e1f5d34\", esExports)\n  }\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-6e1f5d34\",\"hasScoped\":false,\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0&bustCache!./src/pages/photos/index.vue\n// module id = 718\n// module chunks = 28"],"sourceRoot":""}