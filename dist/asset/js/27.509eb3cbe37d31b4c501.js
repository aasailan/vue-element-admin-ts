webpackJsonp([27],{540:function(t,s,a){"use strict";function e(t){n||a(660)}Object.defineProperty(s,"__esModule",{value:!0});var i=a(661),o=a(662),n=!1,l=a(6),r=e,u=l(i.a,o.a,!1,r,null,null);u.options.__file="src\\pages\\publish_task_detail\\index.vue",u.esModule&&Object.keys(u.esModule).some(function(t){return"default"!==t&&"__"!==t.substr(0,2)}),s.default=u.exports},660:function(t,s){},661:function(t,s,a){"use strict";var e=a(12),i=a(55),o=a.n(i),n=a(110),l=a(61),r=a(36),u=a(111),c=a(60),d=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var a in s)s.hasOwnProperty(a)&&(t[a]=s[a])};return function(s,a){function e(){this.constructor=s}t(s,a),s.prototype=null===a?Object.create(a):(e.prototype=a.prototype,new e)}}(),v=this&&this.__decorate||function(t,s,a,e){var i,o=arguments.length,n=o<3?s:null===e?e=Object.getOwnPropertyDescriptor(s,a):e;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,s,a,e);else for(var l=t.length-1;l>=0;l--)(i=t[l])&&(n=(o<3?i(n):o>3?i(s,a,n):i(s,a))||n);return o>3&&n&&Object.defineProperty(s,a,n),n},_=this&&this.__metadata||function(t,s){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,s)},f=this&&this.__awaiter||function(t,s,a,e){return new(a||(a=Promise))(function(i,o){function n(t){try{r(e.next(t))}catch(t){o(t)}}function l(t){try{r(e.throw(t))}catch(t){o(t)}}function r(t){t.done?i(t.value):new a(function(s){s(t.value)}).then(n,l)}r((e=e.apply(t,s||[])).next())})},p=this&&this.__generator||function(t,s){function a(t){return function(s){return e([t,s])}}function e(a){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,o&&(n=o[2&a[0]?"return":a[0]?"throw":"next"])&&!(n=n.call(o,a[1])).done)return n;switch(o=0,n&&(a=[0,n.value]),a[0]){case 0:case 1:n=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,o=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(n=r.trys,!(n=n.length>0&&n[n.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!n||a[1]>n[0]&&a[1]<n[3])){r.label=a[1];break}if(6===a[0]&&r.label<n[1]){r.label=n[1],n=a;break}if(n&&r.label<n[2]){r.label=n[2],r.ops.push(a);break}n[2]&&r.ops.pop(),r.trys.pop();continue}a=s.call(t,r)}catch(t){a=[6,t],o=0}finally{i=n=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}var i,o,n,l,r={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return l={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l},h=function(t){function s(){var s=null!==t&&t.apply(this,arguments)||this;return s.publishedTask=null,s}return d(s,t),s.prototype.activated=function(){return f(this,void 0,void 0,function(){var t,s;return p(this,function(a){switch(a.label){case 0:return t=this.$route.params,[4,l.a.getPublishedTaskDetail(t.taskId)];case 1:return s=a.sent(),this.publishedTask=s.body.obj,this.checkAmount(this.publishedTask),this.findAcceptLetter(this.publishedTask),[2]}})})},s.prototype.checkAmount=function(t){for(var s=0,a=t.totalAmount,e=0,i=0,o=0,n=0,l=t.subsetTasks;n<l.length;n++){var r=l[n];0!==r.taskStatus&&4!==r.taskStatus?(2===t.taskType&&0===r.receiveStatus&&(i=r.refundStatus,o+=r.amount),s+=r.amount,a-=r.amount):4===r.taskStatus||0===r.taskStatus&&1===r.receiveStatus?a-=r.amount:e++}t.refundAmout=s,t.residualAmount=a,t.actuallyPaid=t.totalAmount-s,t.residualCount=e,t.remainRefundStatus=i,t.failRefundAmout=o},s.prototype.findAcceptLetter=function(t){for(var s=t.subsetTasks,a=0,e=s;a<e.length;a++){var i=e[a];if(4===i.taskStatus)for(var o=0,n=i.letters;o<n.length;o++){var l=n[o];if(1===l.isFriend){i.acceptLetter=l;break}}}},s.prototype.toEvaluatePage=function(t,s){r.a.saveItem(u.a.subTask+t.subId,t);var a={action:s,subId:t.subId};this.$router.push({name:"taskEvaluation",params:a})},s.prototype.cancelRemainSubTask=function(t){return f(this,void 0,void 0,function(){var s,a,e;return p(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),[4,l.a.cancelRemainSubTask(t)];case 1:return s=i.sent(),[4,l.a.getPublishedTaskDetail(t)];case 2:return a=i.sent(),this.publishedTask=a.body.obj,this.checkAmount(this.publishedTask),this.findAcceptLetter(this.publishedTask),[3,4];case 3:return e=i.sent(),this.showToast(new c.a(e.message)),[3,4];case 4:return[2]}})})},s.prototype.cancelSimpleSubTaskOrRefund=function(t,s){return f(this,void 0,void 0,function(){var s,a,e,i;return p(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,l.a.cancelSimpleSubTaskOrRefund(t)];case 1:return s=o.sent(),a=this.$route.params,[4,l.a.getPublishedTaskDetail(a.taskId)];case 2:return e=o.sent(),this.publishedTask=e.body.obj,this.checkAmount(this.publishedTask),this.findAcceptLetter(this.publishedTask),[3,4];case 3:return i=o.sent(),this.showToast(new c.a(i.message)),[3,4];case 4:return[2]}})})},v([Object(n.a)("showToast"),_("design:type",Object)],s.prototype,"showToast",void 0),s=v([o()({})],s)}(e.default);s.a=h},662:function(t,s,a){"use strict";var e=function(){var t=this,s=t.$createElement,a=t._self._c||s;return t.publishedTask?a("div",{attrs:{id:"task-detail"}},[a("div",{staticClass:"major-task-info"},[a("div",{staticClass:"title"},[t._v(t._s(t._f("taskStatus")(t.publishedTask)))]),t._v(" "),a("div",{staticClass:"task-info"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-20 font-color-35"},[t._v("订单类型")]),t._v(" "),a("div",{staticClass:"col-80 font-color-78"},[t._v(t._s(t._f("taskType")(t.publishedTask.subject)))])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-20 font-color-35"},[t._v("红包类型")]),t._v(" "),a("div",{staticClass:"col-80 font-color-78"},[t._v(t._s(t._f("redPacketType")(t.publishedTask))+" X "+t._s(t.publishedTask.totalCount)+"个，共"+t._s(t._f("taskAmount")(t.publishedTask.totalAmount))+"元")])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-20 font-color-35"},[t._v("任务期限")]),t._v(" "),a("div",{staticClass:"col-80 font-color-78"},[t._v(t._s(t.publishedTask.duration)+"天")])]),t._v(" "),2===t.publishedTask.taskType?a("div",{staticClass:"row"},[a("div",{staticClass:"col-20 font-color-35"},[t._v("公开范围")]),t._v(" "),a("div",{staticClass:"col-80 font-color-78"},[t._v(t._s(t._f("rangeDetail")(t.publishedTask.range)))])]):t._e(),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-20 font-color-35"},[t._v("留言")]),t._v(" "),a("div",{staticClass:"col-80 font-color-78"},[t._v(t._s(t.publishedTask.leaveMsg))])])]),t._v(" "),a("div",{staticClass:"payment-info"},[a("div",{staticClass:"row font-color-35"},[a("div",{staticClass:"col-20"},[t._v("红包总额")]),t._v(" "),a("div",{staticClass:"col-80"},[t._v("￥"+t._s(t._f("taskAmount")(t.publishedTask.totalAmount)))])]),t._v(" "),a("div",{staticClass:"row font-color-35"},[a("div",{staticClass:"col-20"},[t._v("已退款")]),t._v(" "),a("div",{staticClass:"col-80"},[t._v("￥"+t._s(t._f("taskAmount")(t.publishedTask.refundAmout)))])])]),t._v(" "),a("div",{staticClass:"actually-paid"},[a("div",{staticClass:"row font-color-78"},[a("div",{staticClass:"col-20"},[t._v("实付")]),t._v(" "),a("div",{staticClass:"col-80"},[t._v("￥"+t._s(t._f("taskAmount")(t.publishedTask.actuallyPaid)))])])])]),t._v(" "),a("div",{staticClass:"recommend-detail"},[a("div",{staticClass:"row font-color-78"},[a("div",{staticClass:"col-20"},[t._v("推荐详情")]),t._v(" "),a("div",{staticClass:"col-80"},[t._v("剩余红包 ￥"+t._s(t._f("taskAmount")(t.publishedTask.residualAmount)))])])]),t._v(" "),2===t.publishedTask.taskType&&(t.publishedTask.residualCount>0||t.publishedTask.failRefundAmout>0)?a("div",{staticClass:"subtask-detail"},[a("div",{staticClass:"subtask-head-bar-waiting"},[a("span",{staticClass:"font-color-78",staticStyle:{"margin-right":"8px"}},[t._v(t._s(t._f("redPacketType")(t.publishedTask)))]),t._v(" "),t.publishedTask.residualCount>0?a("span",{staticClass:"head-bar-right font-color-78"},[t._v("剩余"+t._s(t.publishedTask.residualCount)+"个待领取")]):t._e(),t._v(" "),t.publishedTask.failRefundAmout>0?a("span",{staticClass:"head-bar-right font-color-78"},[t._v("退款总额 ￥"+t._s(t._f("taskAmount")(t.publishedTask.failRefundAmout)))]):t._e()]),t._v(" "),2!==t.publishedTask.remainRefundStatus&&1===t.publishedTask.paymentStatus?a("hr"):t._e(),t._v(" "),2!==t.publishedTask.remainRefundStatus&&1===t.publishedTask.paymentStatus?a("div",{staticClass:"subtask-footer"},[1===t.publishedTask.remainRefundStatus?a("span",[t._v("退款中"),a("div",{staticClass:"font-color-35",staticStyle:{display:"inline","font-size":"12px","margin-left":"5px"}},[t._v("红包将退回您的支付账户中")])]):t._e(),t._v(" "),-1===t.publishedTask.remainRefundStatus?a("span",[t._v("退款失败，请重试。")]):t._e(),t._v(" "),1!==t.publishedTask.remainRefundStatus?a("span",{staticClass:"button-footer",on:{click:function(s){t.cancelRemainSubTask(t.publishedTask.taskId)}}},[t._v("取消订单")]):t._e()]):t._e()]):t._e(),t._v(" "),t._l(t.publishedTask.subsetTasks,function(s){return a("div",{key:s.subId,staticClass:"subtask-detail"},[1===s.receiveStatus?a("div",{staticClass:"subtask-head-bar-received"},[a("div",{staticClass:"header-portrait"},[a("load-img",{staticClass:"header-avatar",attrs:{type:"img",url:s.toUser.headPortrait}})],1),t._v(" "),a("div",{staticClass:"header-info"},[a("div",{staticClass:"receiver-name"},[t._v(t._s(s.toUser.realname))]),t._v(" "),a("div",{staticClass:"receiver-time font-color-35"},[t._v(t._s(s.receiveTime)+" 接收")])]),t._v(" "),4===s.taskStatus?a("div",{staticClass:"subtask-status font-color-78"},[t._v("已完成")]):t._e(),t._v(" "),3===s.taskStatus?a("div",{staticClass:"subtask-status font-color-78"},[t._v("未完成")]):t._e(),t._v(" "),1===s.taskStatus?a("div",{staticClass:"subtask-status font-color-78"},[t._v("已取消")]):t._e(),t._v(" "),0===s.taskStatus?a("div",{staticClass:"subtask-status font-color-78"},[t._v("进行中")]):t._e()]):t._e(),t._v(" "),0===s.receiveStatus&&2!==t.publishedTask.taskType?a("div",{staticClass:"subtask-head-bar-waiting"},[a("span",{staticClass:"font-color-78"},[t._v(t._s(t._f("redPacketType")(t.publishedTask)))]),t._v(" "),2!==t.publishedTask.redPacketType?a("span",{staticClass:"font-color-78"},[t._v("￥"+t._s(t._f("taskAmount")(s.amount)))]):t._e(),t._v(" "),1===t.publishedTask.taskType?a("span",{staticClass:"font-color-78"},[t._v("\n                    给\n                    "),a("load-img",{staticClass:"header-avatar-waiting",attrs:{type:"img",url:s.toUser.headPortrait}}),t._v(" "),t._v("\n                    "+t._s(s.toUser.realname)+"\n                ")],1):t._e(),t._v(" "),0===s.taskStatus?a("span",{staticClass:"head-bar-right font-color-78"},[t._v("待领取")]):t._e(),t._v(" "),1===s.taskStatus?a("span",{staticClass:"head-bar-right font-color-78"},[t._v("已取消")]):t._e(),t._v(" "),2===s.taskStatus?a("span",{staticClass:"head-bar-right font-color-78"},[t._v("接受超时")]):t._e()]):t._e(),t._v(" "),1===s.receiveStatus?a("div",{staticClass:"subtask-body"},[a("div",{staticClass:"row font-color-78"},[a("div",{staticClass:"col-50"},[t._v(t._s(t._f("redPacketType")(t.publishedTask))+" ￥"+t._s(t._f("taskAmount")(s.amount)))]),t._v(" "),a("div",{staticClass:"col-50 deadline-time"},[t._v(t._s(s.dueTime)+" 截止")])]),t._v(" "),a("div",{staticClass:"img-content row"},[a("div",{staticClass:"title"},[t._v("共推荐"+t._s(s.letters.length)+"人")]),t._v(" "),t._l(s.letters,function(t){return a("load-img",{key:t.newFriend,staticClass:"header-avatar-little",attrs:{type:"img",url:t.headPortrait}})})],2),t._v(" "),4===s.taskStatus?a("div",{staticClass:"img-content row"},[a("div",{staticClass:"title"},[t._v("已添加")]),t._v(" "),s.acceptLetter?a("load-img",{staticClass:"header-avatar-little",attrs:{type:"img",url:s.acceptLetter.headPortrait}}):t._e()],1):t._e()]):t._e(),t._v(" "),1===s.receiveStatus?a("div",{staticClass:"subtask-subinfo whole-background font-color-35"},[4===s.taskStatus?a("div",[t._v("完成时间: "+t._s(s.endTime))]):t._e(),t._v(" "),2===s.refundStatus?a("div",[t._v("取消时间: "+t._s(s.endTime))]):t._e(),t._v(" "),a("div",[t._v("创建时间: "+t._s(s.createTime))]),t._v(" "),a("div",[t._v("子订单号: "+t._s(s.subId))])]):t._e(),t._v(" "),0===s.receiveStatus&&2!==t.publishedTask.taskType&&2!==s.refundStatus&&1===s.paymentStatus?a("hr"):t._e(),t._v(" "),4===s.taskStatus||2===s.refundStatus||2===t.publishedTask.taskType&&0===s.receiveStatus||1!==s.paymentStatus?t._e():a("div",{staticClass:"subtask-footer"},[1===s.refundStatus?a("span",{staticClass:"note-footer"},[t._v("退款中"),a("div",{staticClass:"font-color-35",staticStyle:{display:"inline","font-size":"12px","margin-left":"5px"}},[t._v("红包将退回您的支付账户中")])]):t._e(),t._v(" "),-1===s.refundStatus?a("span",{staticClass:"note-footer"},[t._v("退款失败，请重试。")]):t._e(),t._v(" "),0===s.taskStatus?a("span",{staticClass:"button-footer button-pink",on:{click:function(a){t.cancelSimpleSubTaskOrRefund(s.subId,s.refundStatus)}}},[t._v("取消订单")]):t._e(),t._v(" "),-1===s.refundStatus?a("span",{staticClass:"button-footer button-pink",on:{click:function(a){t.cancelSimpleSubTaskOrRefund(s.subId,s.refundStatus)}}},[t._v("申请退款")]):t._e()]),t._v(" "),4===s.taskStatus?a("div",{staticClass:"subtask-footer"},[0===s.evaluateStatus?a("div",{staticClass:"button-footer",on:{click:function(a){t.toEvaluatePage(s,"add")}}},[t._v("待评价")]):t._e(),t._v(" "),1===s.evaluateStatus?a("div",{staticClass:"button-footer",on:{click:function(a){t.toEvaluatePage(s,"check")}}},[t._v("查看评价")]):t._e()]):t._e(),t._v(" "),1===s.receiveStatus&&2===s.refundStatus||3===t.publishedTask.taskType&&1!==s.paymentStatus?a("div",{staticClass:"blank-footer"}):t._e()])}),t._v(" "),a("div",{staticClass:"major-task-order-info"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-20 font-color-35"},[t._v("订单编号")]),t._v(" "),a("div",{staticClass:"col-80 font-color-78"},[t._v(t._s(t.publishedTask.taskId))])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-20 font-color-35"},[t._v("交易单号")]),t._v(" "),a("div",{staticClass:"col-80 font-color-78"},[t._v(t._s(t.publishedTask.tradeSn))])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-20 font-color-35"},[t._v("创建时间")]),t._v(" "),a("div",{staticClass:"col-80 font-color-78"},[t._v(t._s(t.publishedTask.createTime))])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-20 font-color-35"},[t._v("截止时间")]),t._v(" "),a("div",{staticClass:"col-80 font-color-78"},[t._v(t._s(t.publishedTask.endTime))])])])],2):t._e()},i=[];e._withStripped=!0;var o={render:e,staticRenderFns:i};s.a=o}});
//# sourceMappingURL=27.509eb3cbe37d31b4c501.js.map