webpackJsonp([30],{542:function(t,e,a){"use strict";function s(t){n||a(666)}Object.defineProperty(e,"__esModule",{value:!0});var i=a(667),o=a(672),n=!1,r=a(6),c=s,l=r(i.a,o.a,!1,c,null,null);l.options.__file="src\\pages\\pay\\index.vue",l.esModule&&Object.keys(l.esModule).some(function(t){return"default"!==t&&"__"!==t.substr(0,2)}),e.default=l.exports},666:function(t,e){},667:function(t,e,a){"use strict";var s=a(12),i=a(55),o=a.n(i),n=a(110),r=a(583),c=a(61),l=a(25),v=a(60),u=a(579),d=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])};return function(e,a){function s(){this.constructor=e}t(e,a),e.prototype=null===a?Object.create(a):(s.prototype=a.prototype,new s)}}(),p=this&&this.__decorate||function(t,e,a,s){var i,o=arguments.length,n=o<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,a):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,a,s);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(n=(o<3?i(n):o>3?i(e,a,n):i(e,a))||n);return o>3&&n&&Object.defineProperty(e,a,n),n},_=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},f=this&&this.__awaiter||function(t,e,a,s){return new(a||(a=Promise))(function(i,o){function n(t){try{c(s.next(t))}catch(t){o(t)}}function r(t){try{c(s.throw(t))}catch(t){o(t)}}function c(t){t.done?i(t.value):new a(function(e){e(t.value)}).then(n,r)}c((s=s.apply(t,e||[])).next())})},y=this&&this.__generator||function(t,e){function a(t){return function(e){return s([t,e])}}function s(a){if(i)throw new TypeError("Generator is already executing.");for(;c;)try{if(i=1,o&&(n=o[2&a[0]?"return":a[0]?"throw":"next"])&&!(n=n.call(o,a[1])).done)return n;switch(o=0,n&&(a=[0,n.value]),a[0]){case 0:case 1:n=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,o=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(n=c.trys,!(n=n.length>0&&n[n.length-1])&&(6===a[0]||2===a[0])){c=0;continue}if(3===a[0]&&(!n||a[1]>n[0]&&a[1]<n[3])){c.label=a[1];break}if(6===a[0]&&c.label<n[1]){c.label=n[1],n=a;break}if(n&&c.label<n[2]){c.label=n[2],c.ops.push(a);break}n[2]&&c.ops.pop(),c.trys.pop();continue}a=e.call(t,c)}catch(t){a=[6,t],o=0}finally{i=n=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}var i,o,n,r,c={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r},h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.task=null,e.taskRegion=l.O,e.payTipShow=!1,e.neverNotifyCheck=!1,e.params=null,e}return d(e,t),e.prototype.activated=function(){return f(this,void 0,void 0,function(){var t,e,a,s,i,o,n;return y(this,function(r){switch(r.label){case 0:return t=this.payParmas,this.params=t,[4,c.a.getPublishedTaskDetail(t.taskId)];case 1:if(e=r.sent(),this.task=e.body.obj,a=e.body.obj,this.getNotifyCheckFromLocalstorage(),1===a.taskType){for(s=[],i=0,o=a.subsetTasks;i<o.length;i++)n=o[i],n.toUser&&n.toUser.realname&&s.push(n.toUser.realname);this.task.toUsers=s.join("、")}return[2]}})})},e.prototype.deactivated=function(){return f(this,void 0,void 0,function(){return y(this,function(t){return this.payTipShow=!1,[2]})})},Object.defineProperty(e.prototype,"payParmas",{get:function(){return u.a.cacheData},enumerable:!0,configurable:!0}),e.prototype.getNotifyCheckFromLocalstorage=function(){var t=window.localStorage.getItem("neverNotifyCheck");this.neverNotifyCheck=!!t&&"true"===t},e.prototype.pay=function(){return f(this,void 0,void 0,function(){var t,e,a,s,i,o,n;return y(this,function(r){switch(r.label){case 0:return t=this.params,[4,c.a.pay(t.taskId)];case 1:return e=r.sent(),a=e.body.obj.nonceStr,s=e.body.obj.package,i=e.body.obj.signType,o=e.body.obj.paySign,n=e.body.obj.timeStamp,this.weChatPay(l.g,n,a,s,i,o),[2]}})})},e.prototype.weChatPay=function(t,e,a,s,i,o){function n(){window.WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:t,timeStamp:e,nonceStr:a,package:s,signType:i,paySign:o},function(t){"get_brand_wcpay_request:ok"===t.err_msg?(r.showToast(new v.a("支付成功")),3!==r.task.taskType||r.neverNotifyCheck?r.$router.replace({name:"myTaskList"}):r.payTipShow=!0):r.showToast(new v.a("支付失败"))})}var r=this;void 0===typeof window.WeixinJSBridge?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",n,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",n),document.attachEvent("onWeixinJSBridgeReady",n)):n()},e.prototype.closeTip=function(){this.neverNotifyCheck?window.localStorage.setItem("neverNotifyCheck","true"):window.localStorage.setItem("neverNotifyCheck","false"),this.payTipShow=!1,this.$router.replace({name:"myTaskList"})},p([Object(n.a)("showToast"),_("design:type",Object)],e.prototype,"showToast",void 0),e=p([o()({components:{"mu-checkbox":r.a}})],e)}(s.default);e.a=h},672:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.task?a("div",{staticClass:"content",attrs:{id:"pay"}},[3!==t.task.taskType?a("div",{staticClass:"top-title"},[t._v("订单信息")]):t._e(),t._v(" "),1===t.task.taskType?a("div",{staticClass:"order-detail"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-25"},[t._v("订单名称：")]),t._v(" "),a("div",{staticClass:"col-75"},[t._v(t._s(t.task.subject))])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-25"},[t._v("总金额：")]),t._v(" "),a("div",{staticClass:"col-75"},[t._v(t._s(t._f("taskAmount")(t.task.totalAmount))+"元")])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-25"},[t._v("创建时间：")]),t._v(" "),a("div",{staticClass:"col-75"},[t._v(t._s(t.task.createTime))])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-25"},[t._v("有效期：")]),t._v(" "),a("div",{staticClass:"col-75"},[t._v(t._s(t.task.duration)+"天")])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-25"},[t._v("邀请好友：")]),t._v(" "),a("div",{staticClass:"col-75"},[t._v("\n                "+t._s(t.task.toUsers)+"\n            ")])])]):t._e(),t._v(" "),2===t.task.taskType?a("div",{staticClass:"order-detail"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-25"},[t._v("订单名称：")]),t._v(" "),a("div",{staticClass:"col-75"},[t._v(t._s(t.task.subject))])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-25"},[t._v("红包类型：")]),t._v(" "),a("div",{staticClass:"col-75"},[t._v(t._s(1===t.task.redPacketType?"普通红包":"随机红包"))])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-25"},[t._v("总金额：")]),t._v(" "),a("div",{staticClass:"col-75"},[t._v(t._s(t._f("taskAmount")(t.task.totalAmount))+"元")])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-25"},[t._v("有效期：")]),t._v(" "),a("div",{staticClass:"col-75"},[t._v(t._s(t.task.duration)+"天")])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-25"},[t._v("公开范围：")]),t._v(" "),a("div",{staticClass:"col-75"},[t._v(t._s(t.taskRegion[t.task.range.rangeType-1]))])]),t._v(" "),3===t.task.range.rangeType||4===t.task.range.rangeType?a("div",{staticClass:"row"},[a("div",{staticClass:"col-25"},[t._v("公司：")]),t._v(" "),a("div",{staticClass:"col-75"},[t._v(t._s(t.task.range.company))])]):t._e(),t._v(" "),3===t.task.range.rangeType||5===t.task.range.rangeType?a("div",{staticClass:"row"},[a("div",{staticClass:"col-25"},[t._v("常驻地：")]),t._v(" "),a("div",{staticClass:"col-75"},[t._v(t._s(t.task.range.permanentPlace))])]):t._e()]):t._e(),t._v(" "),a("div",{staticClass:"order-detail"},[a("div",{staticClass:"row total-amount"},[a("div",{staticClass:"col-25"},[t._v("订单总额")]),t._v(" "),a("div",{staticClass:"col-75"},[a("i",{staticClass:"iconfont icon-match-maker-price"},[t._v(t._s(t._f("taskAmount")(t.task.totalAmount)))])])])]),t._v(" "),a("div",{staticClass:"top-title"},[t._v("请选择支付方式")]),t._v(" "),a("mu-list-item",{staticClass:"normal-list-item",attrs:{title:"微信支付"}},[a("i",{staticClass:"iconfont icon-check-label",attrs:{slot:"right"},slot:"right"})]),t._v(" "),a("mu-raised-button",{staticClass:"pay-button",attrs:{label:"支付",fullWidth:""},on:{click:t.pay}}),t._v(" "),a("mu-dialog",{attrs:{open:t.payTipShow,bodyClass:"pay-tip-font"},on:{close:t.closeTip}},[a("div",[a("p",[t._v("小主，")]),t._v(" "),a("p",[t._v("\n                系统小红娘已经全速开工去寻找啦~"),a("br"),t._v(" 您放心，如果在30天内未能帮您找到合适的对象，您打赏的红包将自动退还。\n            ")])]),t._v(" "),a("mu-checkbox",{attrs:{label:"不再提示",labelClass:"never-notify"},model:{value:t.neverNotifyCheck,callback:function(e){t.neverNotifyCheck=e},expression:"neverNotifyCheck"}}),t._v(" "),a("mu-flat-button",{attrs:{slot:"actions",primary:"",label:"朕知道了"},on:{click:t.closeTip},slot:"actions"})],1)],1):t._e()},i=[];s._withStripped=!0;var o={render:s,staticRenderFns:i};e.a=o}});
//# sourceMappingURL=30.e2b8883c429c2f28789a.js.map