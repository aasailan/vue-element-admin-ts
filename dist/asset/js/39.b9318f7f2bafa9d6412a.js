webpackJsonp([39],{543:function(t,e,n){"use strict";function o(t){i||n(673)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(674),r=n(695),i=!1,s=n(6),u=o,c=s(a.a,r.a,!1,u,null,null);c.options.__file="src\\pages\\bind_phone\\index.vue",c.esModule&&Object.keys(c.esModule).some(function(t){return"default"!==t&&"__"!==t.substr(0,2)}),e.default=c.exports},673:function(t,e){},674:function(t,e,n){"use strict";var o=n(12),a=n(55),r=n.n(a),i=n(110),s=n(36),u=n(61),c=n(575),l=n(60),b=n(111),h=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),f=this&&this.__decorate||function(t,e,n,o){var a,r=arguments.length,i=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(i=(r<3?a(i):r>3?a(e,n,i):a(e,n))||i);return r>3&&i&&Object.defineProperty(e,n,i),i},p=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},d=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(a,r){function i(t){try{u(o.next(t))}catch(t){r(t)}}function s(t){try{u(o.throw(t))}catch(t){r(t)}}function u(t){t.done?a(t.value):new n(function(e){e(t.value)}).then(i,s)}u((o=o.apply(t,e||[])).next())})},v=this&&this.__generator||function(t,e){function n(t){return function(e){return o([t,e])}}function o(n){if(a)throw new TypeError("Generator is already executing.");for(;u;)try{if(a=1,r&&(i=r[2&n[0]?"return":n[0]?"throw":"next"])&&!(i=i.call(r,n[1])).done)return i;switch(r=0,i&&(n=[0,i.value]),n[0]){case 0:case 1:i=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,r=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(i=u.trys,!(i=i.length>0&&i[i.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){u.label=n[1];break}if(6===n[0]&&u.label<i[1]){u.label=i[1],i=n;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(n);break}i[2]&&u.ops.pop(),u.trys.pop();continue}n=e.call(t,u)}catch(t){n=[6,t],r=0}finally{a=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var a,r,i,s,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.buttonTxt="获取验证码",e.buttonEnable=!1,e.submitEnable=!1,e.phone="",e.code="",e}return h(e,t),e.prototype.inputPhone=function(t){this.phone=t,this.buttonEnable=s.a.checkPhoneNumber(t)},e.prototype.getCode=function(){return d(this,void 0,void 0,function(){var t,e,n,o,a=this;return v(this,function(r){switch(r.label){case 0:this.buttonEnable=!1,this.buttonTxt="正在获取",r.label=1;case 1:return r.trys.push([1,3,,4]),[4,u.a.bindPhoneCode(this.phone)];case 2:return t=r.sent(),this.buttonTxt="获取成功",this.submitEnable=!0,e=60,n=setInterval(function(){if(0===e)return clearInterval(n),a.buttonTxt="重新获取",void(a.buttonEnable=!0);a.buttonTxt=e+"s",e--},1e3),[3,4];case 3:return o=r.sent(),this.showToast(new l.a(o.message)),this.buttonTxt="重新获取",this.buttonEnable=!0,[3,4];case 4:return[2]}})})},e.prototype.bindPhone=function(){return d(this,void 0,void 0,function(){var t,e,n,o,a,r,i,c;return v(this,function(h){switch(h.label){case 0:t=this.code,e=this.phone,h.label=1;case 1:if(h.trys.push([1,6,,7]),0===e.length)throw new Error("手机号不能为空");if(0===t.length)throw new Error("验证码不能为空");return[4,u.a.bindPhone(e,t)];case 2:return n=h.sent(),1100!==(o=n.body.subStatus)?[3,4]:(a=s.a.getItem(b.a.callbackUrl,!1)||"/tab/ai",[4,this.initUser()]);case 3:return h.sent(),this.showToast(new l.a("绑定成功")),this.$router.replace({path:a}),[3,5];case 4:1101===o&&(r=s.a.getItem(b.a.sex),i={phone:e,sex:r},this.$router.replace({name:"register",params:i})),h.label=5;case 5:return[3,7];case 6:return c=h.sent(),this.showToast(new l.a(c.message)),[3,7];case 7:return[2]}})})},f([Object(i.a)("showToast"),p("design:type",Object)],e.prototype,"showToast",void 0),f([Object(i.a)("initUser"),p("design:type",Object)],e.prototype,"initUser",void 0),e=f([r()({components:{"mu-text-field":c.a}})],e)}(o.default);e.a=y},695:function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content",attrs:{id:"bind-phone"}},[n("div",{staticClass:"title"},[t._v("请绑定您的手机号")]),t._v(" "),n("div",{staticClass:"input-content"},[n("mu-text-field",{staticClass:"phone-input",attrs:{label:"输入您的手机号",labelClass:"label",labelFloat:""},on:{input:function(e){t.inputPhone(e)}}})],1),t._v(" "),n("div",{staticClass:"input-content"},[n("mu-text-field",{staticClass:"code-input",attrs:{label:"验证码",labelClass:"label",labelFloat:""},model:{value:t.code,callback:function(e){t.code=e},expression:"code"}}),t._v(" "),n("mu-raised-button",{staticClass:"submit-button",class:t.buttonEnable?"active":"unactive",attrs:{label:t.buttonTxt,disabled:!t.buttonEnable},on:{click:t.getCode}})],1),t._v(" "),n("mu-raised-button",{staticClass:"submit-button",class:t.submitEnable?"active":"unactive",attrs:{label:"绑定",fullWidth:"",disabled:!t.submitEnable},on:{click:t.bindPhone}})],1)},a=[];o._withStripped=!0;var r={render:o,staticRenderFns:a};e.a=r}});
//# sourceMappingURL=39.b9318f7f2bafa9d6412a.js.map